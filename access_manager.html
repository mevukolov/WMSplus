<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <title>WMS+</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://raw.githubusercontent.com/mevukolov/WMSplus/refs/heads/main/icons/wms_icon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="ui.js" defer></script>
    <script src="access_manager.js" defer></script>
</head>

<body class="modern-ui">


<div id="menu-overlay" class="menu-overlay"></div>

<header class="header">
    <button class="btn btn-round header-btn" id="menu-btn">☰</button>
    <span class="header-title">Нижний Новгород</span>
    <div style="margin-left:auto;display:flex;align-items:center;gap:8px;">
        <span id="user-name-small" class="user-name" aria-hidden="true"></span>
        <button class="btn btn-round header-btn" id="logout-btn">⎋</button>
    </div>
</header>

<div id="sidebar" class="sidebar">
    <div class="sidebar-content"></div>
</div>

<main class="wrap" style="max-width:1100px;margin-top:90px;">
    <div class="card access-manager-card">

    <div style="display:flex;align-items:center;justify-content:space-between;">
            <h1>Управление пользователями</h1>
            <button id="btn-add-user" class="btn btn-rect">Добавить пользователя</button>
        </div>

        <div class="table-wrapper" style="margin-top:20px;">
            <table style="width:100%;border-collapse:collapse;">
                <thead style="background:#f7f7f7;">
                <tr>
                    <th style="padding:10px;">ID</th>
                    <th style="padding:10px;">ФИО</th>
                    <th style="padding:10px;">Доступы</th>
                    <th style="padding:10px;">Действия</th>
                </tr>
                </thead>
                <tbody id="users-tbody"></tbody>
            </table>
        </div>

    </div>
</main>

<!-- ======================== МОДАЛКА =========================== -->

<div id="user-modal" class="modal hidden">
    <div class="modal-content">

        <h2 id="modal-title">Новый пользователь</h2>

        <div class="mb">
            <label>ID (логин)</label>
            <input id="m-id" class="input" placeholder="1034305">
        </div>

        <div class="mb">
            <label>ФИО</label>
            <input id="m-fio" class="input" placeholder="Иванов Иван Иванович">
        </div>

        <div class="mb">
            <label>Пароль</label>
            <input id="m-pass" class="input" placeholder="Пароль">
        </div>

        <div class="mb">
            <label style="font-weight:bold;">Доступы:</label>
            <div id="access-groups"></div>
        </div>

        <div class="actions" style="margin-top:20px;">
            <button id="m-save" class="btn btn-rect">Сохранить</button>
            <button id="m-cancel" class="btn btn-outline">Закрыть</button>
        </div>

    </div>
</div>


<div id="toasts" class="toasts"></div>
</body>
</html>
